# 7. 分治
适用于具有最优子结构的问题，且各子问题之间相互独立没有重叠部分。

*注*：动态规划能解决的问题分治法都可以解决，但由于存在子问题重复计算效率不如DP解法。

## 快速幂
对于`x^y => x * x * x ...x => (x*x..x) * (x*x..x) * x`分为两段。

```cpp
{% include "./code/快速幂.cpp"%}
```

## 第K小的数
原问题：从`arr[1,n]`求第k小的数
子问题：从`[1,n/2)`求第k小的数，或，从`arr[n/2,n)`求第(k-n/2)小的数

```cpp
{% include "./code/第K小的数.cpp" %}
```

## 逆序对数
数列中相邻元素可以交换,求交换多少次后数列有序（即：求原序列中有多少个逆序对）

```cpp
{% include "./code/第K小的数.cpp" %}
```



1. 上台阶问题：玩家一次可以上1阶或2阶，求走到N阶台阶的总方案数。
    - 分解：玩家只能从 n-2 或 n-1 阶走到第N阶，则子问题是:求f(n-2)和f(n-1).
    - 合并：显然$f(n) = f(n-2) + f(n-1)$, 特别的`f(1)=1,f(2)=2`.
2. 草原上的兔子：原本只有1只兔子，一个月后可以繁殖1只，新生兔一个月后可以再繁殖，求第N个月的兔子总数。
    - 分解：第N个月的兔子数由其上个月的兔子数 + 该月新生的兔子数构成，即求f(n-1)及n-1月份中有生育能力的兔子数，由于新生兔一个月后可生育，n-1月能生育的兔子为f(n-2)。
    - 合并：所以 $f(n) = f(n-1) + f(n-2),f(1)=1,f(2)=2$
3. RPG难题：对于N个空白格子,使用R,P,G三种颜色填充要求相邻格子和首尾格子颜色不能相同。求最多涂色方案数。
    - 分解：第n个格子颜色受n-1和0格子制约。则子问题：求f(n-1)。
    - 合并：
        - 当0和n-1不同时, n只能涂第三种颜色: `f(n) = f(n-1)`, 这里f(i)表示以i结尾合法的方案数。
        - 当0和n-1同色时, n可以涂两种颜色: 满足0和n-1同色的方案数为`f(n-2)`, 所以`f(n) = 2*f(n-2)`。
        - 综上：$f(n) = f(n-1) + 2*f(n-2)$, 特别的`f(1)=3,f(2)=6,f(3)=6`
4. 危险的组合：往N个盒子放0或1，要求摆放方案中至少有三个连续0，求最多有多少中摆放方案。
    - 分解：第n个盒子摆放受前n-1状态制约:若前n-1已经满足条件则n可为0或1,若未满足要求n-2,n-1,n全为0才可满足条件。所以子问题:`f(n-1)` 和 `2^(n-3) - f(n-3)`;
    - 合并：显然 $f(n) = 2* f(n-1) + 2^(n-3) - f(n-3)$; 其中`f(1)=f(2)=0,f(3)=1`
5. 全错位排列: 一个人写了n封不同的信及相应的n个不同的信封，他把这n封信都装错了信封，问都装错信封的装法有多少种？
    - 分解：设n位置放置k号信,
        - 若k位置恰好放了n号信，则只需求`f(n-2)`即可。
        - 若k位置不放置n号信(认为k处放n是非错位摆放)，则问题转换为求`f(n-1)`。
        - 以上情况，k都有n-1种取值，且满足加法原理。
    - 合并：$f(n) = (n-1) * (f(n-2) + f(n-1))$
6. 排队问题: 队伍中m个人持5元和n个人10元, 公园票价5元且初始无5元找零；求合法排队方案数(同样钱的人交换视为同一种)
    - 分解：若能明确队尾人员钱数，则可把问题范围缩小。对于无10元情况`f(m,0) = 1`，若n>m则`f(m,m+i) = 0`
    - 合并：对队尾的分情况讨论(即队尾持5元 或 10元)满足加法原理：$f(m,n) = f(m-1,n) + f(m,n-1)$
