
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>5. 多线程 · Java进阶手册草稿)</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Chavin">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-ancre-navigation/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/web.css">
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="5.多线程.html" />
    
    
    <link rel="prev" href="../chapter4/4.反射.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    1. 基础语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../">
            
                <a href="../#11-编译运行">
            
                    
                    1.1 编译运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../">
            
                <a href="../#12-数据类型">
            
                    
                    1.2 数据类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="../">
            
                <a href="../#13-语句结构">
            
                    
                    1.3 语句结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="../">
            
                <a href="../#14-异常捕获">
            
                    
                    1.4 异常捕获
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../chapter2/2.面向对象.html">
            
                <a href="../chapter2/2.面向对象.html">
            
                    
                    2. 面向对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../chapter2/2.面向对象.html">
            
                <a href="../chapter2/2.面向对象.html#21-封装">
            
                    
                    2.1 封装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../chapter2/2.面向对象.html">
            
                <a href="../chapter2/2.面向对象.html#22-继承">
            
                    
                    2.2 继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../chapter2/2.面向对象.html">
            
                <a href="../chapter2/2.面向对象.html#23-多态">
            
                    
                    2.3 多态
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chapter3/3.泛型.html">
            
                <a href="../chapter3/3.泛型.html">
            
                    
                    3. 泛型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../chapter3/3.泛型.html">
            
                <a href="../chapter3/3.泛型.html#31-类型擦除">
            
                    
                    3.1 类型擦除
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../chapter3/3.泛型.html">
            
                <a href="../chapter3/3.泛型.html#32-使用处型变">
            
                    
                    3.2 使用处型变
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../chapter4/4.反射.html">
            
                <a href="../chapter4/4.反射.html">
            
                    
                    4. 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="5.多线程.html">
            
                <a href="5.多线程.html">
            
                    
                    5. 多线程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="5.多线程.html">
            
                <a href="5.多线程.html#51-线程和池">
            
                    
                    5.1 线程和池
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="5.多线程.html">
            
                <a href="5.多线程.html#52-锁和aqs">
            
                    
                    5.2 锁和AQS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="5.多线程.html">
            
                <a href="5.多线程.html#53-juc库">
            
                    
                    5.3 J.U.C库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../chapter6/6.IO操作.html">
            
                <a href="../chapter6/6.IO操作.html">
            
                    
                    6. IO操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../chapter6/6.IO操作.html">
            
                <a href="../chapter6/6.IO操作.html#61-文件io">
            
                    
                    6.1 文件IO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../chapter6/6.IO操作.html">
            
                <a href="../chapter6/6.IO操作.html#62-网络">
            
                    
                    6.2 网络
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../chapter6/6.IO操作.html">
            
                <a href="../chapter6/6.IO操作.html#63-数据库">
            
                    
                    6.3 数据库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../chapter7/7.Java虚拟机.html">
            
                <a href="../chapter7/7.Java虚拟机.html">
            
                    
                    7. Java虚拟机
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../chapter7/7.Java虚拟机.html">
            
                <a href="../chapter7/7.Java虚拟机.html#71-虚拟机结构">
            
                    
                    7.1 虚拟机结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../chapter7/7.Java虚拟机.html">
            
                <a href="../chapter7/7.Java虚拟机.html#72-类加载">
            
                    
                    7.2 类加载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../chapter7/7.Java虚拟机.html">
            
                <a href="../chapter7/7.Java虚拟机.html#73-对象内存布局和生命周期">
            
                    
                    7.3 对象内存布局和生命周期
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html">
            
                    
                    8. 工具附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html#81-数组工具">
            
                    
                    8.1 数组工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html#82-数值转换和随机">
            
                    
                    8.2 数值转换和随机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html#83-日期时间处理">
            
                    
                    8.3 日期时间处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html#84-正则表达式">
            
                    
                    8.4 正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../chapter8/8.工具附录.html">
            
                <a href="../chapter8/8.工具附录.html#85-robot">
            
                    
                    8.5 Robot
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >5. 多线程</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><span class="title-icon "></span><a href="#5-&#x591A;&#x7EBF;&#x7A0B;"><b></b>5. &#x591A;&#x7EBF;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#51-&#x7EBF;&#x7A0B;&#x548C;&#x6C60;"><b></b>5.1 &#x7EBF;&#x7A0B;&#x548C;&#x6C60;</a></li><ul><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x72B6;&#x6001;"><b></b>&#x7EBF;&#x7A0B;&#x72B6;&#x6001;</a></li><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;"><b></b>&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;</a></li><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;"><b></b>&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;</a></li><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;"><b></b>&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;</a></li><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x6C60;"><b></b>&#x7EBF;&#x7A0B;&#x6C60;</a></li><ul><li><span class="title-icon "></span><a href="#&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;"><b></b>&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</a></li></ul></ul><li><span class="title-icon "></span><a href="#52-&#x9501;&#x548C;aqs"><b></b>5.2 &#x9501;&#x548C;AQS</a></li><ul><li><span class="title-icon "></span><a href="#abstractqueuedsynchronizer"><b></b>AbstractQueuedSynchronizer</a></li></ul><li><span class="title-icon "></span><a href="#53-juc&#x5E93;"><b></b>5.3 J.U.C&#x5E93;</a></li><ul><li><span class="title-icon "></span><a href="#&#x539F;&#x5B50;&#x7C7B;atomicxxx"><b></b>&#x539F;&#x5B50;&#x7C7B;AtomicXxx</a></li><ul><li><span class="title-icon "></span><a href="#&#x7ADE;&#x4E89;&#x5206;&#x91CF;xxxaccumulator"><b></b>&#x7ADE;&#x4E89;&#x5206;&#x91CF;XxxAccumulator</a></li><li><span class="title-icon "></span><a href="#&#x7248;&#x672C;&#x5F15;&#x7528;atomicxxxreference"><b></b>&#x7248;&#x672C;&#x5F15;&#x7528;AtomicXxxReference</a></li></ul><li><span class="title-icon "></span><a href="#&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;"><b></b>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;</a></li><li><span class="title-icon "></span><a href="#juc&#x963B;&#x585E;&#x961F;&#x5217;"><b></b>J.U.C&#x963B;&#x585E;&#x961F;&#x5217;</a></li><ul><li><span class="title-icon "></span><a href="#&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;"><b></b>&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;</a></li></ul><li><span class="title-icon "></span><a href="#futuretask"><b></b>FutureTask</a></li></ul></ul></div><a href="#5-&#x591A;&#x7EBF;&#x7A0B;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="5-&#x591A;&#x7EBF;&#x7A0B;"><a name="5-&#x591A;&#x7EBF;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#5-&#x591A;&#x7EBF;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>5. &#x591A;&#x7EBF;&#x7A0B;</h1>
<ul>
<li>&#x8FDB;&#x7A0B;&#x662F;OS&#x8FDB;&#x884C;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x548C;&#x8C03;&#x5EA6;&#x7684;&#x5355;&#x4F4D;&#xFF0C;&#x7EBF;&#x7A0B;&#x662F;CPU&#x8C03;&#x5EA6;&#x548C;&#x5206;&#x6D3E;&#x7684;&#x5355;&#x4F4D;&#xFF1B;</li>
<li>&#x7EBF;&#x7A0B;&#x4ECE;&#x5C5E;&#x4E8E;&#x8FDB;&#x7A0B;&#x4E14;&#x548C;&#x8FDB;&#x7A0B;&#x4E2D;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x8FDB;&#x7A0B;&#x8D44;&#x6E90;&#xFF0C;&#x7EBF;&#x7A0B;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x6BD4;&#x8FDB;&#x7A0B;&#x66F4;&#x5FEB;&#xFF1B;</li>
<li>&#x8DE8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x9700;&#x8981;IPC&#x901A;&#x9053;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x8FC7;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x9AD8;&#x6548;&#x901A;&#x4FE1;(&#x8FDB;&#x7A0B;&#x5185;&#x5B58;&#x3001;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x3001;&#x8FDB;&#x7A0B;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x3001;&#x7528;&#x6237;ID&#x548C;&#x8FDB;&#x7A0B;&#x7EC4;ID,&#x5728;&#x7EBF;&#x7A0B;&#x95F4;&#x662F;&#x5171;&#x4EAB;&#x7684;)&#x3002;</li>
</ul>
<h1 id="51-&#x7EBF;&#x7A0B;&#x548C;&#x6C60;"><a name="51-&#x7EBF;&#x7A0B;&#x548C;&#x6C60;" class="anchor-navigation-ex-anchor" href="#51-&#x7EBF;&#x7A0B;&#x548C;&#x6C60;"><i class="fa fa-link" aria-hidden="true"></i></a>5.1 &#x7EBF;&#x7A0B;&#x548C;&#x6C60;</h1>
<p>JVM&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;MAIN&#x7EBF;&#x7A0B;&#x548C;GC&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;&#x3002;</p>
<h2 id="&#x7EBF;&#x7A0B;&#x72B6;&#x6001;"><a name="&#x7EBF;&#x7A0B;&#x72B6;&#x6001;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x72B6;&#x6001;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x72B6;&#x6001;</h2>
<ol>
<li>&#x521B;&#x5EFA;<code>New</code>: &#x5C1A;&#x672A;&#x6267;&#x884C;<code>start()</code>&#x65B9;&#x6CD5;</li>
<li>&#x5C31;&#x7EEA;<code>Runnable</code>: &#x7B49;&#x5F85;OS&#x8C03;&#x5EA6;&#x8FD0;&#x884C;</li>
<li>&#x963B;&#x585E;<code>Blocked</code>: &#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x5230;&#x8D44;&#x6E90;</li>
<li>&#x7B49;&#x5F85;<code>Waiting</code>: &#x4E3B;&#x52A8;&#x653E;&#x5F03;CPU(&#x4F11;&#x7720;,&#x793C;&#x8BA9;,&#x7B49;&#x5F85;&#x6761;&#x4EF6;)&#x7B49;&#x5F85;&#x88AB;&#x5524;&#x9192;<ul>
<li><code>thread#join();</code> &#x653E;&#x5F03;&#x9501;&#x8FDB;&#x5165;Waiting,&#x76F4;&#x5230;<code>thread</code>&#x8DD1;&#x5B8C;&#x624D;&#x8FDB;&#x5165;Runnable</li>
<li><code>lock#wait();</code> &#x653E;&#x5F03;&#x9501;&#x8FDB;&#x5165;Waiting,&#x76F4;&#x5230;&#x83B7;&#x53D6;&#x5230;lock&#x7684;&#x6761;&#x4EF6;&#x624D;&#x8FDB;&#x5165;Runnable</li>
<li><code>Thread::sleep();</code> &#x4FDD;&#x6301;&#x9501;&#x8FDB;&#x5165;Waiting,&#x8D85;&#x65F6;&#x540E;&#x8F6C;Runnable&#x7B49;&#x8C03;&#x5EA6;</li>
<li><code>Thread::yield();</code> &#x4FDD;&#x6301;&#x9501;&#x8FDB;&#x5165;Runnable,&#x7B49;&#x5F85;&#x8C03;&#x5EA6;(&#x53EA;&#x793C;&#x8BA9;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;)</li>
</ul>
</li>
<li>&#x7EC8;&#x6B62;<code>Terminated</code>: &#x7EBF;&#x7A0B;&#x81EA;&#x7136;&#x7EC8;&#x6B62;&#x6216;&#x5F02;&#x5E38;&#x6B7B;&#x4EA1;</li>
</ol>
<p><img src="../.asset/threadState.png" alt="&#x7EBF;&#x7A0B;&#x72B6;&#x6001;&#x5207;&#x6362;"></p>
<h2 id="&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;"><a name="&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;</h2>
<ul>
<li><code>thread.interrupt();</code>: &#x5C06;&#x4E2D;&#x65AD;&#x6807;&#x8BB0;true(&#x82E5;&#x6B63;&#x5728;<code>sleep()/wait()</code>&#x7B49;&#x4E2D;&#x65AD;&#x65B9;&#x6CD5;&#x65F6;,&#x7528;&#x5F02;&#x5E38;&#x6253;&#x65AD;)</li>
<li><code>thread.isInterrupted();</code>: &#x8FD4;&#x56DE;&#x4E2D;&#x65AD;&#x6807;&#x8BB0;,&#x65E0;&#x526F;&#x4F5C;&#x7528;;</li>
<li><code>Thread::interrupted();</code>: &#x8FD4;&#x56DE;&#x4E2D;&#x65AD;&#x6807;&#x8BB0;,&#x5E76;&#x628A;&#x4E2D;&#x65AD;&#x6807;&#x8BB0;&#x590D;&#x4F4D;&#x4E3A;false;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token class-name">Runnable</span> runTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// &#x68C0;&#x67E5;&#x4E2D;&#x65AD;&#x6807;&#x8BB0;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// &#x5916;&#x90E8;&#x8C03;interrupt()&#x629B;&#x5F02;&#x5E38;&#x4E2D;&#x65AD;&#x672C;&#x7EBF;&#x7A0B;,&#x4E2D;&#x65AD;&#x6807;&#x8BB0;&#x9700;&#x624B;&#x52A8;&#x7F6E;&#x4E3A;true</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;"><a name="&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;</h2>
<ul>
<li>&#x53EF;&#x89C1;&#x6027;&#xFF1A;A&#x7EBF;&#x7A0B;&#x7684;&#x7F13;&#x5B58;&#x5BF9;B&#x7EBF;&#x7A0B;&#x4E0D;&#x53EF;&#x89C1;&#x3002;</li>
<li>&#x539F;&#x5B50;&#x6027;&#xFF1A;JVM&#x53EA;&#x4FDD;&#x8BC1;<strong>&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x8BFB;&#x53D6;&#x548C;&#x8D4B;&#x503C;</strong>&#x662F;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x6709;&#x5E8F;&#x6027;&#xFF1A;&#x6307;&#x4EE4;&#x91CD;&#x6392;(<code>.class</code>/&#x6C47;&#x7F16;/CPU&#x6307;&#x4EE4;)&#x9075;&#x5FAA;happens-before&#x89C4;&#x5219;&#xFF0C;&#x540C;as-if-serial&#x8BED;&#x4E49;&#xFF0C;&#x5373;&#x7EBF;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x548C;&#x6392;&#x5E8F;&#x524D;&#x4E00;&#x81F4;&#xFF0C;&#x5373;&#x6709;&#x6570;&#x636E;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x6307;&#x4EE4;&#x4E0D;&#x4F1A;&#x88AB;&#x91CD;&#x6392;&#x3002;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token comment">// final &#x4FDD;&#x8BC1;final&#x7684;&#x53D8;&#x91CF;&#x5728;&#x8BFB;&#x53D6;&#x524D;&#x5176;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x3002;</span>
<span class="token comment">// volatile &#x786E;&#x4FDD;volatile&#x5199;&#x64CD;&#x4F5C;&#x524D;&#x540E;&#x6709;&#x5C4F;&#x969C;&#xFF0C;&#x5E76;&#x5237;&#x65B0;&#x4E3B;&#x5B58;&#x3001;&#x6807;&#x8BB0;&#x5404;&#x7EBF;&#x7A0B;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x3002;</span>
<span class="token comment">// synchronized &#x786E;&#x4FDD;&#x5728;&#x83B7;&#x53D6;&#x548C;&#x91CA;&#x653E;&#x9501;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x6709;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#xFF0C;&#x4E14;&#x5237;&#x65B0;&#x4E3B;&#x5B58;&#x5E76;&#x6807;&#x8BB0;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x3002;</span>
<span class="token comment">// &#x539F;&#x5B50;&#x7C7B;&#x578B; &#x57FA;&#x4E8E;`UnSafe`&#x7C7B;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x5185;&#x5B58;&#xFF0C;&#x7981;&#x6B62;&#x8BE5;&#x6307;&#x4EE4;&#x4E0E;&#x524D;&#x540E;&#x7684;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;&#xFF0C;&#x5E76;&#x5237;&#x65B0;&#x4E3B;&#x5B58;&#x5E76;&#x6807;&#x8BB0;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x3002;</span>

<span class="token comment">// ThreadLocal&#x53D8;&#x91CF;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x662F;&#x72EC;&#x7ACB;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x4E92;&#x4E0D;&#x5E72;&#x6270;;</span>
<span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">&gt;</span></span> format <span class="token operator">=</span> <span class="token class-name">ThreadLocal</span>
                <span class="token punctuation">.</span><span class="token function">withInitial</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x4F1A;&#x521D;&#x59CB;&#x5316;&#x5E76;&#x4FDD;&#x5B58;&#x5728;ThreadLocalMap&#x4E2D;, &#x4E4B;&#x540E;&#x4F7F;&#x7528;&#x672C;&#x7EBF;&#x7A0B;&#x4E0D;&#x518D;&#x521D;&#x59CB;&#x5316;&#x76F4;&#x5230;&#x7EBF;&#x7A0B;&#x88AB;&#x9500;&#x6BC1;</span>
format<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><img src="../.asset/threadLocal.png" alt="ThreadLocal&#x539F;&#x7406;"></p>
<p><em>&#x6CE8;:</em> Key&#x662F;&#x865A;&#x5F15;&#x7528;ThreadLocal,&#x8BE5;&#x5BF9;&#x8C61;&#x9500;&#x6BC1;&#x540E;JVM&#x4F1A;&#x5728;<code>get()/set()/remove()</code>&#x65F6;&#x6E05;&#x7406;<code>Key.get()==null</code>&#x7684;Entry(&#x5373;&#x4F7F;&#x8FD9;&#x6837;&#x4ECD;&#x7136;&#x53EF;&#x80FD;&#x5185;&#x5B58;&#x6CC4;&#x9732;);</p>
<h2 id="&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;"><a name="&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;</h2>
<ul>
<li>&#x4F18;&#x5148;&#x7EA7;&#xFF1A;<code>Thread#setPriority(Thread.NORMAL_PRIORITY)</code> &#x6B64;&#x4F18;&#x5148;&#x7EA7;&#x5728;Linux&#x4E0B;&#x65E0;&#x6548;<ul>
<li>&#x5728;<code>start()</code>&#x524D;&#x8BBE;&#x7F6E;<code>[10,1]</code>,&#x503C;&#x8D8A;&#x5927;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;;</li>
<li>&#x9ED8;&#x8BA4;&#x7236;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;,&#x89C1;<code>Thread#init();</code></li>
<li><code>Thread.yield()</code>&#x53EA;&#x4F1A;&#x793C;&#x8BA9;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x540C;&#x6216;&#x66F4;&#x9AD8;&#x7684;&#x7EBF;&#x7A0B;;</li>
</ul>
</li>
<li>&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;&#xFF1A;<code>Thread#isDaemon();Thread#setDaemon(boolean)</code>&#xFF1A;<ul>
<li>&#x540E;&#x53F0;&#x901A;&#x7528;&#x670D;&#x52A1;,&#x5E76;&#x975E;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;(&#x4F8B;&#x5982;:GC)</li>
<li>&#x82E5;&#x8FDB;&#x7A0B;&#x53EA;&#x5269;&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x6740;&#x6B7B;,&#x6240;&#x4EE5;&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;&#x4E2D;&#x8BFB;&#x5199;&#x6587;&#x4EF6;&#x5BB9;&#x6613;&#x635F;&#x574F;&#x6570;&#x636E;&#x3002;</li>
</ul>
</li>
</ul>
<h2 id="&#x7EBF;&#x7A0B;&#x6C60;"><a name="&#x7EBF;&#x7A0B;&#x6C60;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x6C60;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x6C60;</h2>
<p>&#x901A;&#x8FC7;&#x5BF9;&#x8C61;&#x6C60;&#x590D;&#x7528;&#x65B9;&#x6848;&#x6765;&#x89E3;&#x51B3;&#xFF1A;&#x9891;&#x7E41;&#x5730;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x3001;&#x9500;&#x6BC1;&#x5E26;&#x6765;&#x7684;&#x4E0D;&#x5FC5;&#x8981;&#x635F;&#x8017;&#xFF1B;&#x63A7;&#x5236;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#x4EE5;&#x6291;&#x5236;&#x5185;&#x5B58;&#x4E0A;&#x6DA8;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>
    <span class="token comment">// &#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;,&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x5B58;&#x6D3B;(&#x5373;&#x4F7F;&#x7A7A;&#x95F2;,&#x9664;&#x975E;allowCoreThreadTimeout(true))</span>
    corePoolSize<span class="token punctuation">,</span> 
    <span class="token comment">// &#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;</span>
    maximumPoolSize<span class="token punctuation">,</span> 
    <span class="token comment">// &#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x95F2;&#x7F6E;&#x65F6;&#x957F;,&#x8D85;&#x65F6;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x56DE;&#x6536;</span>
    keepAliveTime<span class="token punctuation">,</span> 
    <span class="token comment">// &#x65F6;&#x95F4;&#x5355;&#x4F4D;,&#x53EF;&#x7528;TimeUnit.MILLISECONDS</span>
    timeUnit<span class="token punctuation">,</span> 
    <span class="token comment">// &#x4EFB;&#x52A1;&#x961F;&#x5217;,BlockingQueue&lt;Runnable&gt;</span>
    workQueue<span class="token punctuation">,</span>
    <span class="token comment">// &#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x5DE5;&#x5382;</span>
    threadFactory<span class="token punctuation">,</span> 
    <span class="token comment">// &#x4EFB;&#x52A1;&#x62D2;&#x7EDD;&#x5904;&#x7406;&#x5668;, &#x9ED8;&#x8BA4;ThreadPoolExecutor.AbortPolicy&#x629B;&#x5F02;&#x5E38;;</span>
    rejectedExecutionHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><img src="../.asset/thread-pool.png" alt="&#x7EBF;&#x7A0B;&#x6C60;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;"></p>
<h3 id="&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;"><a name="&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5185;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</h3>
<ul>
<li><code>FixedThreadPool</code>&#xFF1A;&#x9002;&#x7528;&#x8BF7;&#x6C42;&#x9891;&#x7E41;,&#x6570;&#x91CF;&#x57FA;&#x672C;&#x56FA;&#x5B9A;&#x7684;&#x4EFB;&#x52A1;(&#x56FA;&#x5B9A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x65E0;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#xFF0C;&#x65E0;&#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#xFF0C;&#x65E0;&#x9650;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x6301;&#x7EED;&#x7B49;&#x5F85;)</li>
<li><code>CachedThreadPool</code>&#xFF1A;&#x9002;&#x7528;&#x6570;&#x91CF;&#x5E9E;&#x5927;,&#x8017;&#x65F6;&#x8F83;&#x5C11;&#x7684;&#x4EFB;&#x52A1;(&#x65E0;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#xFF0C;&#x65E0;&#x9650;&#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;(MAX_INT)&#x8D85;&#x65F6;60s&#x5173;&#x95ED;&#xFF0C;&#x7A7A;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x7ACB;&#x5373;&#x6267;&#x884C;)</li>
<li><code>SingleThreadPool</code>&#xFF1A;&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x7528;&#x4E8E;&#x907F;&#x514D;&#x5E76;&#x53D1;&#x65F6;&#x6570;&#x636E;&#x4E0D;&#x540C;&#x6B65;&#x95EE;&#x9898;(&#x5355;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#xFF0C;&#x65E0;&#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#xFF0C;&#x65E0;&#x9650;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x6301;&#x7EED;&#x7B49;&#x5F85;)</li>
<li><code>ScheduledThreadPool</code>&#xFF1A;&#x9002;&#x7528;&#x4E8E;&#x5B9A;&#x65F6;&#x6216;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;(&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x56FA;&#x5B9A;&#x65E0;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#xFF0C;&#x65E0;&#x9650;&#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;(MAX_INT)&#x7A7A;&#x95F2;&#x5373;&#x56DE;&#x6536;&#xFF0C;&#x7A7A;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x7ACB;&#x5373;&#x6267;&#x884C;)<ul>
<li><code>Timer</code>&#xFF1A;&#x57FA;&#x4E8E;&#x7CFB;&#x7EDF;&#x7EDD;&#x5BF9;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x7EBF;&#x7A0B;&#x5B9E;&#x73B0;&#xFF0C;&#x67D0;&#x4E2A;&#x4EFB;&#x52A1;&#x6267;&#x884C;(&#x65F6;&#x957F;&#xFF0C;&#x5F02;&#x5E38;)&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x3002;</li>
<li><code>ScheduledThreadPoolExecutor</code>&#xFF1A;&#x57FA;&#x4E8E;&#x76F8;&#x5BF9;&#x65F6;&#x95F4;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x5B9E;&#x73B0;&#xFF0C;&#x67D0;&#x4E2A;&#x4EFB;&#x52A1;&#x6267;&#x884C;(&#x65F6;&#x957F;&#xFF0C;&#x5F02;&#x5E38;)&#x4E0D;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x3002;</li>
</ul>
</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token class-name">ScheduledExecutorService</span> service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScheduledThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x5468;&#x671F;&#x6267;&#x884C;,&#x4E0B;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x95F4; = &#x672C;&#x6B21;&#x4EFB;&#x52A1;&#x5F00;&#x59CB;&#x65F6;&#x95F4; + &#x5468;&#x671F;&#x957F;</span>
service<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span>exeRun<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x5468;&#x671F;&#x6267;&#x884C;,&#x4E0B;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x95F4; = &#x672C;&#x6B21;&#x4EFB;&#x52A1;&#x7ED3;&#x675F;&#x65F6;&#x95F4; + &#x5468;&#x671F;&#x957F;</span>
service<span class="token punctuation">.</span><span class="token function">scheduleWithFixedDelay</span><span class="token punctuation">(</span>exeRun<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="52-&#x9501;&#x548C;aqs"><a name="52-&#x9501;&#x548C;aqs" class="anchor-navigation-ex-anchor" href="#52-&#x9501;&#x548C;aqs"><i class="fa fa-link" aria-hidden="true"></i></a>5.2 &#x9501;&#x548C;AQS</h1>
<p><code>synchronized</code>&#x9501;&#x4F4F;&#x7684;&#x662F;&#x5BF9;&#x8C61;(&#x5BF9;&#x8C61;&#x5934;&#x4E2D;&#x5305;&#x542B;&#x9501;&#x72B6;&#x6001;), &#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7ADE;&#x4E89;&#x6761;&#x4EF6;(<code>wait()/notify()</code>&#x65B9;&#x6CD5;&#x4F9D;&#x8D56;JVM&#x4E2D;Native&#x5C42;&#x7BA1;&#x7A0B;Monitor&#x5BF9;&#x8C61;)&#x3002;</p>
<ul>
<li>&#x53EF;&#x91CD;&#x5165;&#xFF1A;&#x5185;&#x5C42;&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x5177;&#x6709;&#x5916;&#x5C42;&#x65B9;&#x6CD5;&#x7684;&#x83B7;&#x5F97;&#x7684;&#x9501;(&#x9501;&#x8BBE;&#x8BA1;&#x4E3A;&#x6309;&#x7EBF;&#x7A0B;&#x533A;&#x5206;&#x800C;&#x975E;&#x65B9;&#x6CD5;)&#x3002;</li>
<li>&#x975E;&#x516C;&#x5E73;&#xFF1A;OS&#x4E3A;&#x4FDD;&#x8BC1;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x83B7;&#x5F97;&#x9501;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x4E00;&#x5B9A;&#x540C;&#x7533;&#x8BF7;&#x987A;&#x5E8F;(&#x5BF9;&#x8C61;&#x9501;&#x662F;&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF0C;AQS&#x5219;&#x53EF;&#x6307;&#x5B9A;&#x516C;&#x5E73;)&#x3002;</li>
<li>&#x8BFB;&#x5199;&#x9501;&#xFF1A;&#x8BFB;&#x8BFB;&#x5171;&#x4EAB;&#xFF0C;&#x8BFB;&#x5199;&#x4E92;&#x65A5;&#x3002;</li>
<li>&#x5206;&#x6BB5;&#x9501;&#xFF1A;<code>ConcurrentHashMap</code>&#x5728;JDK7-&#x5BF9;&#x6BCF;&#x4E2A;&#x6BB5;&#x52A0;&#x9501;(DK8+&#x5BF9;&#x6BCF;&#x4E2A;Entry&#x52A0;&#x9501;)&#x4EE5;&#x51CF;&#x5C11;&#x51B2;&#x7A81;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x3002;</li>
</ul>
<h2 id="abstractqueuedsynchronizer"><a name="abstractqueuedsynchronizer" class="anchor-navigation-ex-anchor" href="#abstractqueuedsynchronizer"><i class="fa fa-link" aria-hidden="true"></i></a>AbstractQueuedSynchronizer</h2>
<ul>
<li><code>ReentrantLock</code>&#x57FA;&#x4E8E;AQS&#x5B9E;&#x73B0;&#x72EC;&#x5360;&#x9501;&#xFF0C;&#x53EF;&#x6784;&#x5EFA;&#x516C;&#x5E73;&#x6216;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;</li>
<li><code>CountDownLatch</code>&#x57FA;&#x4E8E;AQS&#x9006;&#x7528;&#x5171;&#x4EAB;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x5B9E;&#x73B0;&#x5F02;&#x6B65;&#x95E9;&#x3002;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token comment">/** ReentrantLock **/</span>
    <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Condition</span> condition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x7528;tryLock()&#x4EE3;&#x66FF;lock.lock()&#x53D1;&#x751F;&#x6B7B;&#x9501;&#x65F6;&#x53EF;&#x8D85;&#x65F6;&#x7EC8;&#x6B62;</span>
    <span class="token comment">// lock.lockInterruptibly()&#x65E0;&#x4F11;&#x6B62;&#x5C1D;&#x8BD5;&#x76F4;&#x5230;&#x88AB;interrupt();</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>&#x4E0D;&#x6EE1;&#x8DB3;&#x4E1A;&#x52A1;&#x6761;&#x4EF6;<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                condition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// &#x7B49;&#x5F85;&#x88AB;&#x5524;&#x9192;: condition.signalAll();</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// &#x83B7;&#x53D6;&#x9501;&#x6210;&#x529F;, do ...</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">//</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x9501;&#x8D85;&#x65F6;, do ...</span>
    <span class="token punctuation">}</span>

<span class="token comment">/** CountDownLatch **/</span>
    <span class="token comment">// &#x521D;&#x59CB;&#x5316;,&#x6307;&#x5B9A;&#x5F00;&#x95E9;&#x4EFB;&#x52A1;&#x6570;</span>
    <span class="token class-name">CountDownLatch</span> latch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x6307;&#x6D3E;&#x5B50;&#x4EFB;&#x52A1;&#x5B8C;&#x6BD5;,&#x5173;&#x95E9;; &#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x4E8E;&#x6B64;</span>
    latch<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x5B50;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x6BD5;,&#x901A;&#x77E5;&#x5F00;&#x95E9;</span>
    latch<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="53-juc&#x5E93;"><a name="53-juc&#x5E93;" class="anchor-navigation-ex-anchor" href="#53-juc&#x5E93;"><i class="fa fa-link" aria-hidden="true"></i></a>5.3 J.U.C&#x5E93;</h1>
<p>&#x7531;&#x4E8E;&#x540C;&#x6B65;&#x9501;&#x6027;&#x80FD;&#x6D88;&#x8017;&#x5927;&#xFF0C;&#x800C;<code>volatile</code>&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x53EF;&#x89C1;&#x6027;&#x800C;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;&#xFF1B;&#x73B0;&#x4EE3;CPU&#x63D0;&#x4F9B;&#x4E86;&#x786C;&#x4EF6;&#x7EA7;&#x6307;&#x4EE4;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x539F;&#x8BED;(<code>java.util.concurrent.*</code>&#x57FA;&#x4E8E;CAS&#x6027;&#x80FD;&#x66F4;&#x597D;)&#xFF1A;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// &#x5982;Intel: cmpxchg&#xFF0C;&#x4EE5;&#x4E0B;&#x5047;&#x8BBE;&#x5F53;&#x524D;&#x5185;&#x5B58;&#x503C;&#x4E3A;V&#xFF0C;&#x9884;&#x671F;&#x503C;&#x4E3A;A&#xFF0C;&#x5F85;&#x8BBE;&#x7F6E;&#x503C;&#x4E3A;B</span>
<span class="token comment">// &#x5176;&#x903B;&#x8F91;&#x5F62;&#x5982;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isOtherWriting<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// &#x68C0;&#x6D4B;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5728;&#x5199;&#x503C;&#xFF0C;&#x81EA;&#x65CB;(&#x800C;&#x975E;&#x963B;&#x585E;)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">V</span> <span class="token operator">==</span> <span class="token class-name">A</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// CPU&#x4FDD;&#x8BC1;&#x5728; [V==A&#x4E4B;&#x540E;, &#x8BBE;&#x7F6E;V=B&#x524D;]&#x4E0D;&#x4F1A;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4FEE;&#x6539;V&#x503C; </span>
        isOtherWriting <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token function">setV</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        isOtherWriting <span class="token operator">=</span> <span class="token boolean">false</span>    
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x9884;&#x671F;&#x503C;&#x4E0D;&#x7B26;&#xFF0C;&#x8BBE;&#x7F6E;&#x5931;&#x8D25;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="&#x539F;&#x5B50;&#x7C7B;atomicxxx"><a name="&#x539F;&#x5B50;&#x7C7B;atomicxxx" class="anchor-navigation-ex-anchor" href="#&#x539F;&#x5B50;&#x7C7B;atomicxxx"><i class="fa fa-link" aria-hidden="true"></i></a>&#x539F;&#x5B50;&#x7C7B;AtomicXxx</h2>
<p>&#x901A;&#x8FC7;CAS&#x89E3;&#x51B3;&#x53D8;&#x91CF;&#x56E0;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x8BFB;&#x5199;&#x5BFC;&#x81F4;&#x7684;&#x6570;&#x636E;&#x5F02;&#x5E38;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">AtomicReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ref <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ref<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="&#x7ADE;&#x4E89;&#x5206;&#x91CF;xxxaccumulator"><a name="&#x7ADE;&#x4E89;&#x5206;&#x91CF;xxxaccumulator" class="anchor-navigation-ex-anchor" href="#&#x7ADE;&#x4E89;&#x5206;&#x91CF;xxxaccumulator"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7ADE;&#x4E89;&#x5206;&#x91CF;XxxAccumulator</h3>
<p>CAS&#x5728;&#x5927;&#x91CF;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x65F6;&#x4F1A;&#x4E0D;&#x505C;&#x81EA;&#x65CB;&#x5BFC;&#x81F4;&#x6D88;&#x8017;&#x8FC7;&#x5927;&#xFF0C;&#x7ADE;&#x4E89;&#x5206;&#x91CF;&#x901A;&#x8FC7;&#x5206;&#x6BB5;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x5C06;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0;&#x4E0D;&#x540C;&#x7684;&#x6BB5;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5C06;&#x5404;&#x6BB5;&#x5408;&#x5E76;&#x8FDB;&#x800C;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// Adder: LongAdder, DoubleAdder</span>
<span class="token comment">// Accumulator: LongAccumulator, DoubleAccumulator</span>
<span class="token comment">// &#x521D;&#x59CB;&#x5316;</span>
<span class="token class-name">LongAdder</span> adder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LongAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x5B50;&#x7EBF;&#x7A0B;&#x57FA;&#x4E8E;&#x5206;&#x91CF;&#x8BA1;&#x7B97;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x4E0A;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;)</span>
adder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// adder.increment();</span>
<span class="token comment">// &#x8BA1;&#x7B97;&#x5B8C;&#x6BD5;&#x540E;&#x5408;&#x5E76;&#x5206;&#x91CF;&#x53D6;&#x7ED3;&#x679C;</span>
adder<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="&#x7248;&#x672C;&#x5F15;&#x7528;atomicxxxreference"><a name="&#x7248;&#x672C;&#x5F15;&#x7528;atomicxxxreference" class="anchor-navigation-ex-anchor" href="#&#x7248;&#x672C;&#x5F15;&#x7528;atomicxxxreference"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7248;&#x672C;&#x5F15;&#x7528;AtomicXxxReference</h3>
<p>CAS&#x4F1A;&#x5B58;&#x5728;ABA&#x95EE;&#x9898;&#xFF0C;&#x901A;&#x8FC7;&#x4E3A;&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#x8BBE;&#x7F6E;&#x7248;&#x672C;&#x53F7;&#x6765;&#x89E3;&#x51B3;&#x5C06;&#x5148;&#x540E;&#x4E24;&#x4E2A;A&#x9519;&#x8BEF;&#x5730;&#x8BA4;&#x4E3A;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x95EE;&#x9898;&#x3002;</p>
<pre class="language-"><code class="lang-java"><span class="token comment">// AtomicMarkableReference &#x4F7F;&#x7528;Boolean&#x503C;&#x505A;&quot;&#x7248;&#x672C;&#x53F7;&quot;</span>
<span class="token class-name">AtomicStampedReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ref <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicStampedReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ref<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> ref<span class="token punctuation">.</span><span class="token function">getStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ref<span class="token punctuation">.</span><span class="token function">getStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ref<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> ref<span class="token punctuation">.</span><span class="token function">getStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ref<span class="token punctuation">.</span><span class="token function">getStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;"><a name="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;" class="anchor-navigation-ex-anchor" href="#&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x96C6;&#x5408;</h2>
<ul>
<li>&#x7528;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#x505A;&#x9501;&#x96C6;&#x5408;: <code>Collections.synchronizedCollection/synchronizedMap();</code>&#x3001;<code>Vector<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span></code>&#x3001;<code>Statck<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>E</span><span class="token punctuation">&gt;</span></span></code>&#x3001;<code>Hashtable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>K,V</span><span class="token punctuation">&gt;</span></span></code>&#x3001;<code>StringBuffer</code></li>
<li>&#x6027;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x96C6;&#x5408;: <ul>
<li><code>CopyOnWriteArraySet/CopyOnWriteArrayList</code>: &#x5199;&#x5165;&#x4E4B;&#x524D;&#x5148;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x51FA;&#x6765;&#x7ED9;&#x8BFB;&#x4F7F;&#x7528;</li>
<li><code>ConcurrentHashMap</code>: &#x7528;&#x66F4;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x9501;&#x51CF;&#x5C11;&#x51B2;&#x7A81;</li>
</ul>
</li>
</ul>
<h2 id="juc&#x963B;&#x585E;&#x961F;&#x5217;"><a name="juc&#x963B;&#x585E;&#x961F;&#x5217;" class="anchor-navigation-ex-anchor" href="#juc&#x963B;&#x585E;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>J.U.C&#x963B;&#x585E;&#x961F;&#x5217;</h2>
<p>&#x963B;&#x585E;&#x961F;&#x5217;&#x5728;&#x961F;&#x5217;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x652F;&#x6301;&#x4E24;&#x4E2A;&#x9644;&#x52A0;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ol>
<li>&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x961F;&#x5217;&#x975E;&#x7A7A;</li>
<li>&#x961F;&#x5217;&#x5DF2;&#x6EE1;&#x65F6;&#xFF0C;&#x52A0;&#x5143;&#x7D20;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x961F;&#x5217;&#x53EF;&#x6DFB;&#x52A0;&#x5143;&#x7D20;</li>
</ol>
<pre class="language-"><code class="lang-java"><span class="token comment">/** &#x629B;&#x51FA;&#x5F02;&#x5E38; **/</span>
    <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/** &#x8FD4;&#x56DE;&#x7279;&#x6B8A;&#x503C;(&#x975E;&#x963B;&#x585E;) **/</span>
    <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x5165;&#x961F;&#x5931;&#x8D25;&#x8FD4;&#x56DE;false; </span>
    <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x51FA;&#x961F;&#x5931;&#x8D25;&#x8FD4;&#x56DE;null</span>
    <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x68C0;&#x67E5;&#x5931;&#x8D25;&#x8FD4;&#x56DE;null</span>

<span class="token comment">/** &#x8D85;&#x65F6;&#x9000;&#x51FA;(&#x975E;&#x6301;&#x7EED;&#x963B;&#x585E;) **/</span>
    <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> time<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** &#x6301;&#x7EED;&#x963B;&#x585E; **/</span>
    <span class="token function">put</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x961F;&#x6EE1;&#x65F6;&#x7B49;&#x5F85;&#x6761;&#x4EF6;</span>
    <span class="token class-name">E</span> <span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x961F;&#x7A7A;&#x65F6;&#x7B49;&#x5F85;&#x6761;&#x4EF6;</span>
</code></pre>
<h3 id="&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;"><a name="&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;" class="anchor-navigation-ex-anchor" href="#&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x963B;&#x585E;&#x961F;&#x5217;&#x6210;&#x5458;</h3>
<ul>
<li><code>ArrayBlockingQueue</code>: &#x6709;&#x754C;/&#x6570;&#x7EC4;; &#x9ED8;&#x8BA4;&#x975E;&#x516C;&#x5E73;&#x9501;</li>
<li><code>LinkedBlockingQueue</code>: &#x53EF;&#x9009;&#x6709;&#x754C;/&#x94FE;&#x8868;; &#x8BFB;&#x5199;&#x5206;&#x9501;</li>
<li><code>PriorityBlockingQueue</code>: &#x65E0;&#x754C;/&#x5806;; &#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;</li>
<li><code>DelayQueue</code>: &#x65E0;&#x754C;/&#x5806;; &#x5143;&#x7D20;&#x8D85;&#x65F6;&#x624D;&#x53EF;&#x53D6;&#x51FA;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#x3001;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;<code>ScheduledThreadPool</code></li>
<li><code>SynchronousQueue</code>: &#x6709;&#x754C;/&#x65E0;; &#x9ED8;&#x8BA4;&#x975E;&#x516C;&#x5E73;&#x9501;, &#x6BCF;&#x4E2A;put&#x90FD;&#x987B;&#x7B49;&#x4E00;&#x4E2A;take, &#x5E94;&#x7528;&#xFF1A;<code>CachedThreadPool</code></li>
<li><code>LinkedBlockingDeque</code>: &#x65E0;&#x754C;/&#x94FE;&#x8868;; &#x652F;&#x6301;&#x53CC;&#x5411;&#x8BFB;&#x5199;(&#x4F46;&#x9501;&#x662F;&#x540C;&#x4E00;&#x4E2A;)</li>
<li><code>LinkedTransferQueue</code>: &#x65E0;&#x754C;/&#x94FE;&#x8868;; &#x5728;&#x963B;&#x585E;&#x961F;&#x5217;&#x57FA;&#x7840;&#x4E0A;&#x591A;&#x4E86;<code>transfer(e)/tryTransfer(e)</code>&#x65B9;&#x6CD5;</li>
</ul>
<pre class="language-"><code class="lang-java"><span class="token class-name">LinkedTransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedTransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x82E5;&#x6709;&#x6D88;&#x8D39;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x7ACB;&#x5373;&#x4F20;&#x9012;&#xFF0C;&#x5426;&#x5219;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x961F;&#x5C3E;&#x963B;&#x585E;&#x751F;&#x4EA7;&#x7EBF;&#x7A0B;&#x76F4;&#x5230;&#x88AB;&#x53D6;&#x8D70;</span>
queue<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x82E5;&#x6709;&#x6D88;&#x8D39;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x7ACB;&#x5373;&#x4F20;&#x9012;&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;false&#x5143;&#x7D20;&#x4E0D;&#x8FDB;&#x961F;&#x5217;</span>
queue<span class="token punctuation">.</span><span class="token function">tryTransfer</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &#x82E5;&#x6709;&#x6D88;&#x8D39;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x7ACB;&#x5373;&#x4F20;&#x9012;&#xFF0C;&#x5426;&#x5219;&#x5143;&#x7D20;&#x8FDB;&#x961F;&#x5C3E;&#x963B;&#x585E;&#x82E5;&#x5E72;&#x65F6;&#x957F;&#xFF0C;&#x82E5;&#x671F;&#x95F4;&#x88AB;&#x53D6;&#x8D70;&#x8FD4;&#x56DE;true&#x5426;&#x5219;&#x8D85;&#x65F6;&#x65F6;&#x8FD4;&#x56DE;false</span>
queue<span class="token punctuation">.</span><span class="token function">tryTransfer</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="futuretask"><a name="futuretask" class="anchor-navigation-ex-anchor" href="#futuretask"><i class="fa fa-link" aria-hidden="true"></i></a>FutureTask</h2>
<p>FutureTask&#x53EF;&#x5C06;Callable&#x8F6C;&#x6362;&#x6210;Runnable&#x4EA4;&#x7ED9;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x53EF;&#x901A;&#x8FC7;Future&#x63A5;&#x53E3;&#x83B7;&#x53D6;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x3002;</p>
<p><img src="../.asset/future-task.png" alt="FutureTask"></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">FutureTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>callable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> task<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../chapter4/4.反射.html" class="navigation navigation-prev " aria-label="Previous page: 4. 反射">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="5.多线程.html#51-线程和池" class="navigation navigation-next " aria-label="Next page: 5.1 线程和池">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"5. 多线程","level":"1.5","depth":1,"next":{"title":"5.1 线程和池","level":"1.5.1","depth":2,"anchor":"#51-线程和池","path":"chapter5/5.多线程.md","ref":"chapter5/5.多线程.md#51-线程和池","articles":[]},"previous":{"title":"4. 反射","level":"1.4","depth":1,"path":"chapter4/4.反射.md","ref":"chapter4/4.反射.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters-small","-back-to-top-button","chapter-fold","splitter","katex","-highlight","code","prism","-tbfed-pagefooter","hide-element","-lunr","-search","-search-pro","search-plus","-sharing","-anchor-navigation-ex","ancre-navigation","-chart","-sharing-plus","-summary"],"root":".","styles":{"website":"styles/web.css","ebook":"styles/ebk.css","pdf":"styles/pdf.css","mobi":"styles/mob.css","epub":"styles/epb.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"©2022 Chavin","modify_label":"上次修订: ","modify_format":"YYYY-MM-DD HH:mm:ss"},"chapter-fold":{},"prism":{"plugins":["line-numbers"],"cssClasses":"line-numbers"},"splitter":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link","a.navigation",".book-header"]},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"ancre-navigation":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"expandable-chapters-small":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{}},"theme":"default","author":"Chavin","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":56,"left":56,"top":56,"bottom":56},"pageSize":"a4"},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Java进阶手册草稿)","language":"zh-hans","gitbook":"*"},"file":{"path":"chapter5/5.多线程.md","mtime":"2022-07-21T12:37:09.241Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-01-15T11:41:03.316Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

